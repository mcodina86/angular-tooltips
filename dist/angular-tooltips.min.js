!function(){"use strict";function t(o,i){return{restrict:"A",scope:{title:"@",fixedPosition:"=",titleClass:"@"},link:function(s,g,e){s.createTooltip=function(t){(e.title||e.tooltip)&&(s.tooltipElement=angular.element("<div>").addClass("angular-tooltip").addClass(s.titleClass),angular.element(document).find("body").append(s.tooltipElement),s.updateTooltip(e.title||e.tooltip),s.tooltipElement.addClass("angular-tooltip-fade-in"))},s.updateTooltip=function(t){s.tooltipElement.html(t),i(s.tooltipElement.contents())(s);var e=s.calculatePosition(s.tooltipElement,s.getDirection());s.tooltipElement.addClass("angular-tooltip-"+e.direction).css(e),o(function(){g.removeAttr("ng-attr-title"),g.removeAttr("title")})},s.$watch("title",function(t){s.tooltipElement&&s.updateTooltip(t)}),s.removeTooltip=function(){angular.element(document.querySelectorAll(".angular-tooltip")).remove()},s.getDirection=function(){return g.attr("tooltip-direction")||g.attr("title-direction")||"top"},s.getBottomSpace=function(){return g.attr("tooltip-space-bottom")||g.attr("title-space-bottom")||0},s.getTopSpace=function(){return g.attr("tooltip-space-top")||g.attr("title-space-top")||0},s.getLeftSpace=function(){return g.attr("tooltip-space-left")||g.attr("title-space-left")||0},s.getRightSpace=function(){return g.attr("tooltip-space-right")||g.attr("title-space-right")||0},s.calculatePosition=function(t,e){var o,i=t[0].getBoundingClientRect(),n=g[0].getBoundingClientRect(),l=window.scrollX||document.documentElement.scrollLeft,r=window.scrollY||document.documentElement.scrollTop,p=12,a={},c=null;if(s.stringStartsWith(e,"left")?(o=s.getAddedSpace(s.getLeftSpace()),a.left=n.left-i.width-6+l-o):s.stringStartsWith(e,"right")?(o=s.getAddedSpace(s.getRightSpace()),a.left=n.left+n.width+6+l-o):s.stringContains(e,"left")?(o=s.getAddedSpace(s.getLeftSpace()),a.left=n.left-i.width+p+l-o):s.stringContains(e,"right")?(o=s.getAddedSpace(s.getRightSpace()),a.left=n.left+n.width-p+l-o):a.left=n.left+n.width/2-i.width/2+l,s.stringStartsWith(e,"top")){o=s.getAddedSpace(s.getTopSpace());var d=s.getTopSpace()||0;"string"==typeof d&&(d=parseInt(d)),a.top=n.top-i.height-6+r-o}else s.stringStartsWith(e,"bottom")?(o=s.getAddedSpace(s.getBottomSpace()),a.top=n.top+n.height+6+r):s.stringContains(e,"top")?(o=s.getAddedSpace(s.getTopSpace()),a.top=n.top-i.height+p+r):s.stringContains(e,"bottom")?(o=s.getAddedSpace(s.getBottomSpace()),a.top=n.top+n.height-p+r):a.top=n.top+n.height/2-i.height/2+r;return s.fixedPosition&&(a.left<l?c=e.replace("left","right"):a.left+i.width>window.innerWidth+l&&(c=e.replace("right","left")),a.top<r?c=e.replace("top","bottom"):a.top+i.height>window.innerHeight+r&&(c=e.replace("bottom","top")),c)?s.calculatePosition(t,c):(a.left+="px",a.top+="px",a.direction=e,a)},s.getAddedSpace=function(t){return t?parseInt(t):0},s.stringStartsWith=function(t,e){return t.substr(0,e.length)===e},s.stringContains=function(t,e){return-1!==t.indexOf(e)},e.title||e.tooltip?(g.on("mouseover",s.createTooltip),g.on("mouseout",s.removeTooltip)):(g.off("mouseover",s.createTooltip),g.off("mouseout",s.removeTooltip)),g.on("destroy",s.removeTooltip),s.$on("$destroy",s.removeTooltip)}}}t.$inject=["$timeout","$compile"],angular.module("tooltips",[]).directive("title",t).directive("tooltip",t)}();